/* --- ALCHEMIST V96.0 | VISUALITY & GESTURE CORE --- */

:root {
    /* Industrial High-Contrast Palette */
    --bg: #000000; 
    --card: #121212; 
    --border: #2a2a2a; 
    --gold: #ffd600; 
    --green: #2ecc71;
    --blue: #3498db;
    --text-main: #ffffff;
    --text-dim: #888888;
    
    /* Font Stack */
    --font-chem: 'Crimson Text', serif; /* Optimized for chemical notation */
    --font-ui: 'Inter', sans-serif;    /* Clean navigation */
    --font-code: 'JetBrains Mono', monospace; /* Data & HUD */
}

/* 1. CORE ARCHITECTURE */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

body { 
    margin: 0; 
    height: 100vh; 
    background: var(--bg); 
    color: var(--text-main);
    font-family: var(--font-ui);
    overflow: hidden; 
    touch-action: none; 
    display: flex; 
    flex-direction: column;
}

/* 2. CHEMISTRY NOTATION RENDERING */
/* Ensures H2O and 10^-3 do not disrupt line-height */
sub { font-size: 0.7em; vertical-align: sub; line-height: 0; position: relative; bottom: -0.2em; }
sup { font-size: 0.7em; vertical-align: super; line-height: 0; position: relative; top: -0.2em; }

/* 3. HUD VISUALS (Top Bar) */
#header { 
    width: 92%; 
    margin: 20px auto 10px; 
    flex-shrink: 0; 
    z-index: 1000; 
}

.header-meta { 
    display: flex; 
    justify-content: space-between; 
    font-family: var(--font-code); 
    font-size: 0.85rem; 
    color: var(--text-dim); 
    letter-spacing: 2px;
    font-weight: 900;
}

.progress-track { 
    width: 100%; 
    height: 4px; 
    background: #1a1a1a; 
    margin-top: 12px; 
    border-radius: 2px; 
    overflow: hidden; 
}

#progress-bar { 
    height: 100%; 
    background: var(--gold); 
    width: 0%; 
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
    box-shadow: 0 0 15px rgba(255, 214, 0, 0.4);
}

/* 4. ACTIVE TAPE LOG (History) */
#history-tape {
    width: 90%; 
    margin: 0 auto; 
    flex-grow: 1; 
    max-height: 10vh; 
    overflow-y: auto; 
    display: flex; 
    flex-direction: column-reverse; 
    font-family: var(--font-code); 
    font-size: 0.75rem; 
    text-align: right; 
    border-right: 2px solid #222;
    padding-right: 12px;
    mask-image: linear-gradient(to bottom, transparent 0%, black 40%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 40%);
}

.log-item { margin-bottom: 4px; color: #333; transition: 0.3s; text-transform: uppercase; }
.log-item.active { color: var(--green); font-weight: 900; }

/* 5. STACK & CARDS */
#stack { 
    position: relative; 
    width: 94%; 
    max-width: 420px; 
    height: 62vh; 
    margin: 0 auto 30px; 
    perspective: 1500px; 
    display: flex; 
    align-items: center; 
    justify-content: center;
}

.card { 
    position: absolute; 
    width: 100%; 
    height: 100%; 
    background: var(--card); 
    border-radius: 44px; 
    border: 1px solid var(--border);
    padding: 35px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
    text-align: center;
    box-shadow: 0 40px 100px rgba(0,0,0,0.9); 
    will-change: transform, opacity;
}

/* Question Visuality: Ultra-Crisp */
.card-q { 
    font-family: var(--font-chem); 
    font-size: clamp(22px, 5.5vmin, 30px); 
    line-height: 1.35; 
    font-weight: 600; 
    color: #ffffff; 
    width: 100%;
    max-height: 80%; 
    overflow-y: auto; 
    scrollbar-width: none;
    padding: 10px;
}
.card-q::-webkit-scrollbar { display: none; }

/* 6. OVERLAYS & FEEDBACK */
.swipe-label { 
    position: absolute; 
    inset: 0; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    background: rgba(0,0,0,0.92); 
    color: #fff; 
    font-weight: 900; 
    font-size: 2rem; 
    text-transform: uppercase; 
    border-radius: 44px; 
    z-index: 999; 
    opacity: 0; 
    pointer-events: none; 
    transition: opacity 0.1s;
    border: 2px solid var(--gold);
}

.overlay { 
    position: absolute; 
    inset: 0; 
    background: #080808; 
    z-index: 1100; 
    padding: 40px; 
    opacity: 0; 
    border-radius: 44px; 
    transition: opacity 0.3s ease; 
    display: none; 
    flex-direction: column; 
    justify-content: center; 
    border: 1px solid var(--gold);
}

.overlay.active { display: flex; opacity: 1; pointer-events: auto; }

.overlay-body { 
    font-size: 1.3rem; 
    line-height: 1.7; 
    color: #cccccc; 
    margin-bottom: 40px; 
    font-family: var(--font-chem); 
    text-align: left;
    overflow-y: auto;
    padding-right: 10px;
}

.btn { 
    width: 100%; 
    padding: 22px; 
    border-radius: 100px; 
    border: none; 
    background: #ffffff; 
    color: #000000; 
    font-weight: 900; 
    text-transform: uppercase; 
    cursor: pointer; 
    font-family: var(--font-ui); 
    letter-spacing: 1px;
}

/* 7. LOADER */
#loader { 
    position: fixed; 
    inset: 0; 
    background: #000; 
    z-index: 5000; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-family: var(--font-code); 
    color: var(--gold); 
    letter-spacing: 10px; 
    font-weight: 900;
}
