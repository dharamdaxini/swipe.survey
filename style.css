/* --- ALCHEMIST V94.0 | OPTIMIZED VISUAL CORE --- */

:root {
    /* Color Palette: Deep contrast for focus */
    --bg: #000000; 
    --card: #111111; 
    --border: #262626; 
    --gold: #ffd600; 
    --green: #2ecc71;
    --blue: #3498db;
    --text-primary: #f5f5f5;
    --text-secondary: #888888;
    
    /* Typography: Specialized Chemistry & UI fonts */
    --font-chem: 'Crimson Text', serif; /* Best for formulas/long text */
    --font-ui: 'Inter', sans-serif;    /* Best for buttons/navigation */
    --font-code: 'JetBrains Mono', monospace; /* Best for HUD/Data */
}

/* 1. LIQUID TYPOGRAPHY & SCALING */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body { 
    margin: 0; 
    height: 100vh; 
    background: var(--bg); 
    color: var(--text-primary);
    font-family: var(--font-ui);
    overflow: hidden; 
    touch-action: none; 
    display: flex; 
    flex-direction: column;
}

/* Enhances readability of chemical formulas like H2O or 10^-3 */
sub { font-size: 0.7em; vertical-align: sub; line-height: 0; }
sup { font-size: 0.7em; vertical-align: super; line-height: 0; }

/* 2. HUD & NAVIGATION VISUALS */
#header { 
    width: 92%; 
    margin: 20px auto 10px; 
    flex-shrink: 0; 
    z-index: 100; 
}

.header-meta { 
    display: flex; 
    justify-content: space-between; 
    font-family: var(--font-code); 
    font-size: 0.8rem; 
    color: var(--text-secondary); 
    letter-spacing: 2px;
    font-weight: 700;
}

.progress-track { 
    width: 100%; 
    height: 4px; 
    background: #1a1a1a; 
    margin-top: 12px; 
    border-radius: 2px; 
    overflow: hidden; 
}

#progress-bar { 
    height: 100%; 
    background: var(--gold); 
    width: 0%; 
    transition: width 0.5s cubic-bezier(0.23, 1, 0.32, 1); 
    box-shadow: 0 0 10px rgba(255, 214, 0, 0.3);
}

/* 3. THE TAPE LOG (History Visuality) */
#history-tape {
    width: 90%; 
    margin: 0 auto; 
    flex-grow: 1; 
    max-height: 10vh; 
    overflow-y: auto; 
    display: flex; 
    flex-direction: column-reverse; 
    font-family: var(--font-code); 
    font-size: 0.75rem; 
    text-align: right; 
    padding-right: 10px; 
    border-right: 2px solid #222;
    mask-image: linear-gradient(to bottom, transparent 0%, black 30%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 30%);
}

.log-item { 
    margin-bottom: 5px; 
    color: #444; 
    cursor: pointer; 
    transition: 0.3s;
    text-transform: uppercase;
}

.log-item.active { 
    color: var(--green); 
    font-weight: 900; 
    text-shadow: 0 0 8px rgba(46, 204, 113, 0.2);
}

/* 4. THE CARD STACK (The Focus Point) */
#stack { 
    position: relative; 
    width: 94%; 
    max-width: 420px; 
    height: 62vh; 
    margin: 0 auto 30px; 
    perspective: 1500px; 
    display: flex; 
    align-items: center; 
    justify-content: center;
}

.card { 
    position: absolute; 
    width: 100%; 
    height: 100%; 
    background: var(--card); 
    border-radius: 44px; 
    border: 1px solid var(--border);
    padding: 35px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
    text-align: center;
    box-shadow: 0 40px 100px rgba(0,0,0,0.9); 
    will-change: transform, opacity;
    backface-visibility: hidden;
}

/* THE QUESTION TEXT - Maximum Readability */
.card-q { 
    font-family: var(--font-chem); 
    font-size: clamp(20px, 5vmin, 28px); 
    line-height: 1.4; 
    font-weight: 600; 
    color: #ffffff; 
    width: 100%;
    max-height: 80%; 
    overflow-y: auto; 
    scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
}

/* 5. INTERACTIVE LABELS & OVERLAY */
.swipe-label { 
    position: absolute; 
    inset: 0; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    background: rgba(0,0,0,0.95); 
    color: #fff; 
    font-weight: 900; 
    font-size: 1.8rem; 
    text-transform: uppercase; 
    border-radius: 44px; 
    z-index: 999; 
    opacity: 0; 
    pointer-events: none; 
    transition: opacity 0.15s ease;
    padding: 30px;
    border: 2px solid var(--gold);
}

.overlay { 
    position: absolute; 
    inset: 0; 
    background: #080808; 
    z-index: 1100; 
    padding: 40px; 
    opacity: 0; 
    border-radius: 44px; 
    transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1); 
    display: none; 
    flex-direction: column; 
    justify-content: center; 
    border: 1px solid var(--gold);
}

.overlay.active { 
    display: flex; 
    opacity: 1; 
    pointer-events: auto; 
}

.overlay-body { 
    font-size: 1.25rem; 
    line-height: 1.7; 
    color: #dddddd; 
    margin-bottom: 40px; 
    font-family: var(--font-chem); 
    text-align: left;
    max-height: 70%;
    overflow-y: auto;
}

.btn { 
    width: 100%; 
    padding: 22px; 
    border-radius: 100px; 
    border: none; 
    background: #ffffff; 
    color: #000000; 
    font-weight: 900; 
    text-transform: uppercase; 
    cursor: pointer; 
    font-family: var(--font-ui); 
    letter-spacing: 1px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.4);
}

/* 6. SYSTEM LOADER */
#loader { 
    position: fixed; 
    inset: 0; 
    background: #000; 
    z-index: 5000; 
    display: flex; 
    flex-direction: column;
    align-items: center; 
    justify-content: center; 
    font-family: var(--font-code); 
    color: var(--gold); 
    letter-spacing: 8px; 
    font-weight: 900;
}
