<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Alchemist | Kinetic v144.0</title>

<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600&family=Inter:wght@400;700;900&family=JetBrains+Mono&display=swap" rel="stylesheet">

<style>
/* --- v144.0 BASE UI --- */
:root { 
    --bg: #000; 
    --card: #0a0a0a; 
    --border: #222; 
    --gold: #ffd600; 
    --text: #fff; 
    --font-code: 'JetBrains Mono', monospace; 
}
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
body { 
    margin: 0; 
    height: 100vh; 
    background: var(--bg); 
    color: var(--text); 
    font-family: 'Inter', sans-serif; 
    overflow: hidden; 
    display: flex; 
    flex-direction: column; 
}

/* --- HUD & HEADER --- */
#header { width: 90%; margin: 25px auto 0; z-index: 100; flex-shrink: 0; }
.header-meta { 
    display: flex; 
    justify-content: space-between; 
    font-family: var(--font-code); 
    font-size: 0.75rem; 
    color: #666; 
    text-transform: uppercase; 
    margin-bottom: 10px; 
}
.track { width: 100%; height: 2px; background: #1a1a1a; margin-top: 2px; }
#progress-bar { height: 2px; background: var(--gold); width: 0%; transition: width 0.4s ease; }

#hud-log { width: 90%; margin: 15px auto; font-family: var(--font-code); font-size: 0.7rem; line-height: 1.6; }
.log-line { opacity: 0.4; transition: 0.2s; }
.log-line.active { color: #2ecc71; opacity: 1; }

/* --- PHYSICS CONTAINER --- */
.stack-container { 
    position: absolute; 
    inset: 0; 
    top: 130px; 
    width: 90%; 
    max-width: 420px; 
    height: calc(100vh - 220px); 
    margin: 0 auto; 
    perspective: 1200px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
}
.card { 
    position: absolute; 
    width: 100%; 
    height: 100%; 
    background: var(--card); 
    border-radius: 14px; 
    border: 1px solid var(--border); 
    padding: 30px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
    box-shadow: 0 20px 60px rgba(0,0,0,0.9); 
    will-change: transform; 
}
.card-q { font-family: 'Crimson Text', serif; font-size: 1.6rem; text-align: center; line-height: 1.4; }
.swipe-label { 
    position: absolute; 
    inset: 0; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    background: #000; 
    font-weight: 900; 
    font-size: 1.5rem; 
    text-transform: uppercase; 
    opacity: 0; 
    transition: opacity 0.15s; 
    border-radius: 14px; 
    color: var(--gold); 
}
</style>
</head>
<body>

<div id="header">
  <div class="header-meta">
    <span>VIA.STACK</span>
    <span id="xp-ui">0 XP</span>
  </div>
  <div class="track"><div id="progress-bar"></div></div>
</div>

<div id="hud-log">
    <div class="log-line">> SYSTEM BOOT</div>
    <div class="log-line">> BRIDGE CONNECTED</div>
    <div class="log-line active" id="live-status">> SESSION READY</div>
</div>

<div id="stack-game" class="stack-container">
    <div class="card"><div class="card-q">DATA LOADED<br>20 UNITS</div></div>
</div>

<script>
let RAW_DATA = [], POOL = [], VOL = 10, Q_IDX = 0, XP = 0;

/* --- v144.0 PHYSICS ENGINE --- */
class Physics {
    constructor(el, cb) {
        this.el = el; this.cb = cb; this.active = false; this.start = {x:0, y:0};
        const s = e => this.dragStart(e.touches ? e.touches[0] : e);
        const m = e => this.dragMove(e.touches ? e.touches[0] : e);
        const e2 = () => this.dragEnd();
        el.addEventListener('mousedown', s); window.addEventListener('mousemove', m); window.addEventListener('mouseup', e2);
        el.addEventListener('touchstart', s); el.addEventListener('touchmove', ev => {if(this.active) ev.preventDefault(); this.dragMove(ev.touches[0])}, {passive:false}); el.addEventListener('touchend', e2);
    }
    dragStart(p) { this.active = true; this.start = {x:p.clientX, y:p.clientY}; this.el.style.transition = "none"; }
    dragMove(p) {
        if(!this.active) return;
        const dx = p.clientX - this.start.x, dy = p.clientY - this.start.y;
        this.el.style.transform = `translate(${dx}px, ${dy}px) rotate(${dx/20}deg)`;
        
        const d = Math.hypot(dx, dy);
        const ls = {UP:this.el.querySelector('.sl-up'), LEFT:this.el.querySelector('.sl-left'), RIGHT:this.el.querySelector('.sl-right')};
        Object.values(ls).forEach(l => {if(l) l.style.opacity = 0;});
        if(d > 30) {
            const dir = this.getDir(dx, dy);
            if(ls[dir]) ls[dir].style.opacity = Math.min(d/100, 1);
        }
    }
    dragEnd() {
        if(!this.active) return; this.active = false;
        const m = new WebKitCSSMatrix(getComputedStyle(this.el).transform);
        if(Math.hypot(m.m41, m.m42) > 100) this.cb(this.getDir(m.m41, m.m42));
        else { this.el.style.transition = "0.3s cubic-bezier(0.2, 0.8, 0.2, 1)"; this.el.style.transform = "translate(0,0)"; }
    }
    getDir(x,y){
        const a=(Math.atan2(-y,x)*180/Math.PI+360)%360;
        if(a>45&&a<135)return "UP"; if(a>135&&a<225)return "LEFT"; return "RIGHT";
    }
}

function render(d) {
    const cont = document.getElementById('stack-game');
    cont.innerHTML = '';
    const el = document.createElement('div'); el.className = 'card';
    el.innerHTML = `<div class="card-q">${d.q}</div>
                    <div class="swipe-label sl-up">${d.u}</div>
                    <div class="swipe-label sl-left">${d.l}</div>
                    <div class="swipe-label sl-right">${d.r}</div>`;
    cont.appendChild(el);
    new Physics(el, (dir) => { 
        Q_IDX++; 
        document.getElementById('live-status').innerText = `> UNIT ID: ${d.id}`;
        if(Q_IDX < VOL) next(); else alert("Complete.");
    });
}

function next() {
    render({id: "001", q: "KINETIC v144.0 BOOTED", u: "QUIZ", l: "LEARN", r: "PDF"});
}

next();
</script>
</body>
</html>
